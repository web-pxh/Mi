<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>商品详情</title>
  <link rel="stylesheet" href="./css/normalize.css">
  <link rel="stylesheet" href="./css/details.css">
  <link rel="shortcut icon" href="./img/favicon.ico" type="image/x-icon">
</head>

<body>
  <!-- 头部 -->
  <header id="header"></header>
  <!-- 导航栏 -->
  <div class="nav-bar" id="nav-bar">
    <div class="container all">
      <!-- 左侧 -->
      <div class="left">
        <a href="javascript:" class="active"></a>
      </div>
      <!-- 右侧 -->
      <div class="right">
        <ul>
          <li><a href="javascript:">概述</a></li>
          <li><a href="javascript:">参数</a></li>
          <li><a href="javascript:">F码通道</a></li>
          <li><a href="javascript:">咨询客服</a></li>
          <li><a href="javascript:">用户评价</a></li>
        </ul>
      </div>
    </div>
  </div>
  <!-- 商品详情 -->
  <div class="details">
    <div class="container">
      <div class="left">
        <!-- 轮播图 -->
        <div class="swiper">
          <ul class="list" id="list">
            <!-- 轮播图片 -->
            <li class="on"><img src=""></li>
            <!-- <li><img src=""></li>
            <li><img src=""></li>
            <li><img src=""></li>
            <li><img src=""></li> -->
          </ul>
          <!-- 左右按钮 -->
          <a class="btn prev">&lt;</a>
          <a class="btn next">&gt;</a>
          <!-- 分页器 -->
          <ol class="page">
            <li class="on"></li>
            <!-- <li></li>
            <li></li>
            <li></li>
            <li></li> -->
          </ol>
        </div>
      </div>
      <!-- 右侧 -->
      <div class="right">
        <!-- 基本信息 -->
        <h2 id="title"></h2>
        <p class="desc" id="content"></p>
        <p title="企业名称：小米通讯技术有限公司
        企业执照注册号：91110108558521630L
        企业地址：北京市海淀区西二旗中路33号院6 号楼9层019号
        企业电话：400-100-5678
        营业期限：2010年08月25日 至 2040年08月24日
        经营范围：开发手机技术、计算机软件及信息技术；技术检测、技术咨询、技术服务、技术转让；计算机技术培训；系统集成；货物进出口、技术进出口、代理进出口；家用电器、通信设备、广播电视设备（不含卫星电视广播、地面接收装置）、机械设备、电子产品、文化用品的批发零售；维修仪器仪表；销售医疗器械I类、II、III类、针纺织品（含家纺家饰）、服装鞋帽、日用杂货、工艺品、文化用品、体育用品、照相器材、卫生用品（含个人护理用品）、钟表眼镜、箱包、家具（不从事实体店铺经营）、小饰品、日用品、乐器、自行车、智能卡；计算机、通讯设备、家用电器、电子产品、机械设备的技术开发、技术服务；销售金银饰品（不含金银质地纪念币）；家用空调的委托生产；委托生产翻译机；销售翻译机、五金交电（不含电动自行车）、厨房用品、陶瓷制品、玻璃制品、玩具、汽车零配件、食用农产品、花卉、苗木、宠物用品、建筑材料、装饰材料、化妆品、珠宝首饰、通讯设备、卫生间用品、农药；生产手机（仅限在海淀区永捷北路2号三层生产及外埠生产）；出版物批发；出版物零售；销售食品。（销售第三类医疗器械以及销售食品以及依法须经批准的项目，经相关部门批准后依批准的内容开展经营活动。）"
          class="ziying">
          小米自营</p>
        <div style="margin-bottom: 20px;">
          <span class="price" id="price"></span>
          <span class="old_price" id="old_price"></span>
        </div>
        <hr>
        <!-- 地址 -->
        <div class="address">
          <div class="info">
            <span>北京</span>
            <span>北京市</span>
            <span>海淀区</span>
            <span>清河街道</span>
            <a href="javascript:alert('该功能目前还在开发中')">修改</a>
          </div>
          <div class="shop_num">
            <span>有现货</span>
          </div>
        </div>
        <!-- 选择版本 -->
        <div class="edition" id="edition"></div>
        <!-- 选择颜色 -->
        <div class="color" id="color"></div>
        <!-- 意外保护 -->
        <div class="protect">
          <h2>选择小米提供的意外保护</h2>
          <span class="span"><a href="javascript:alert('你在点点！！！')">了解意外保护 ></a></span>
          <ul>
            <li class="check in">
              <i><em class="on">√</em></i>
              <img src="./img/bao.png">
              <div class="box">
                <h3>意外保障服务<span>249元</span></h3>
                <p>手机意外碎屏/进水/碾压等损坏</p>
                <div>
                  <i><em class="on">√</em></i>
                  <span>我已阅读<a href="#">服务条款|</a><a href="#">常见问题</a></span>
                </div>
              </div>
            </li>
            <li class="check">
              <i><em>√</em></i>
              <img src="./img/bao.png">
              <div class="box">
                <h3>碎屏保障服务<span>103元</span></h3>
                <p>手机意外碎屏</p>
                <div>
                  <i><em>√</em></i>
                  <span>我已阅读<a href="#">服务条款|</a><a href="#">常见问题</a></span>
                </div>
              </div>
            </li>
          </ul>
        </div>
        <!-- 延长保修 -->
        <div class="protect">
          <h2>选择小米提供的延长保修</h2>
          <span class="span"><a href="javascript:alert('你在点点！！！')">了解延长保修></a></span>
          <ul>
            <li class="check in">
              <i><em class="on">√</em></i>
              <img src="./img/bao.png">
              <div class="box">
                <h3>延长保修服务<span>55元</span></h3>
                <p>厂保延一年，性能故障免费维修</p>
                <div>
                  <i><em class="on">√</em></i>
                  <span>我已阅读<a href="#">服务条款|</a><a href="#">常见问题</a></span>
                </div>
              </div>
            </li>
          </ul>
        </div>
        <!-- 云空间服务 -->
        <div class="protect">
          <h2>选择小米提供的云空间服务</h2>
          <span class="span"><a href="javascript:alert('你在点点！！！')">了解云空间服务 ></a></span>
          <ul>
            <li class="check in">
              <i><em class="on">√</em></i>
              <img src="./img/bao.png">
              <div class="box">
                <h3>云空间年卡200G<span>159元</span></h3>
                <p>主商品签收后，自动激活至下单帐号</p>
                <div>
                  <i><em class="on">√</em></i>
                  <span>我已阅读<a href="#">服务条款|</a><a href="#">常见问题</a></span>
                </div>
              </div>
            </li>
            <li class="check">
              <i><em>√</em></i>
              <img src="./img/bao.png">
              <div class="box">
                <h3>云空间年卡50G<span>49元</span></h3>
                <p>主商品签收后，自动激活至下单帐号</p>
                <div>
                  <i><em>√</em></i>
                  <span>我已阅读<a href="#">服务条款|</a><a href="#">常见问题</a></span>
                </div>
              </div>
            </li>
            <li class="check">
              <i><em>√</em></i>
              <img src="./img/bao.png">
              <div class="box">
                <h3>云空间月卡200G<span>1元</span></h3>
                <p>主商品签收后，自动激活至下单帐号</p>
                <div>
                  <i><em>√</em></i>
                  <span>我已阅读<a href="#">服务条款|</a><a href="#">常见问题</a></span>
                </div>
              </div>
            </li>
            <li class="check">
              <i><em>√</em></i>
              <img src="./img/bao.png">
              <div class="box">
                <h3>云空间月卡50G<span>6元</span></h3>
                <p>主商品签收后，自动激活至下单帐号</p>
                <div>
                  <i><em>√</em></i>
                  <span>我已阅读<a href="#">服务条款|</a><a href="#">常见问题</a></span>
                </div>
              </div>
            </li>
          </ul>
        </div>
        <!-- 计算价格 -->
        <div class="calc">
          <ul>
            <li>
              <span id="shop_name"></span>
              <div>
                <span id="money"></span>
                <del id="old_money"></del>
              </div>
            </li>
            <li>
              <span>意外保障服务</span>
              <div>
                <span>249元</span>
              </div>
            </li>
            <li>
              <span>延长保修服务</span>
              <div>
                <span>55元</span>
              </div>

            </li>
            <li>
              <span>云空间年卡200G</span>
              <div>
                <span>159元</span>
              </div>

            </li>
          </ul>
          <div class="total">
            总计: <span></span>
          </div>
        </div>
        <!-- 加入购物车 -->
        <div class="btns">
          <button id="add" onclick="add()">加入购物车</button>
          <button id="like">喜欢</button>
        </div>
        <!-- 其他信息 -->
        <div class="sale-info">
          <ul>
            <li>
              <img src="./img/quangou.png">
              <span>小米自营</span>
            </li>
            <li>
              <img src="./img/quangou.png">
              <span>小米发货</span>
            </li>
            <li>
              <img src="./img/quangou.png">
              <span>7天无理由退货</span>
            </li>
            <li>
              <img src="./img/quangou.png">
              <span>运费说明</span>
            </li>
            <li>
              <img src="./img/quangou.png">
              <span>企业信息</span>
            </li>
            <li>
              <img src="./img/quangou.png">
              <span>售后服务政策</span>
            </li>
            <li>
              <img src="./img/quangou.png">
              <span>7天价格保护</span>
            </li>
          </ul>
        </div>

      </div>
    </div>
  </div>
  <!-- 底部 -->
  <footer id="footer"> </footer>
  <!-- 右侧的导航栏 -->
  <nav id="bar"></nav>

  <script src="./js/jquery.min.js"></script>
  <script src="./js/components.js"></script>
  <script src="./js/request.js"></script>
  <script src="./js/swiper.js"></script>
  <script>
    /* 获取详情 */
    var search = window.location.search;
    ajax("get", `/Mi/details`, isSuccess, search.slice(5, 7));

    function isSuccess(result) {
      /* 获取各个元素 */
      var title = document.getElementById("title");
      var content = document.getElementById("content");
      var price = document.getElementById("price");
      var old_price = document.getElementById("old_price");
      var edition = document.getElementById("edition");
      var color = document.getElementById("color");
      var shop_name = document.getElementById("shop_name");
      var money = document.getElementById("money");
      var old_money = document.getElementById("old_money");
      var total = document.querySelector(".total span");
      var topbar_name = document.querySelector(".nav-bar .left a");
      if (result.length > 0) {
        var details = JSON.parse(result)[0];
        console.log(details);
        /* 替换其中的内容 */
        allImg[0].src = details.img[0].img;
        title.innerHTML = details.title;
        topbar_name.innerHTML = details.title;
        content.innerHTML = details.content;
        old_price.innerHTML = details.price.toFixed(2) + '元';
        price.innerHTML = (parseInt(old_price.innerHTML) * 0.9).toFixed(2) + '元';
        edition.innerHTML = `
          <h2>选择版本</h2>
            <ul class="type">
              <li class="on"><a href="#">${details.edition[0]}</a></li>
              <li><a href="#">${details.edition[1]}</a></li>
              <li><a href="#">${details.edition[2]}</a></li>
            </ul>
        `;
        color.innerHTML = `
          <h2>选择颜色</h2>
            <ul class="type">
              <li class="on"><a href="#">${details.color[0]}</a></li>
              <li><a href="#">${details.color[1]}</a></li>
              <li><a href="#">${details.color[2]}</a></li>
            </ul>
        `;
        shop_name.innerHTML = `${details.title} ${details.edition[0]} ${details.color[0]}`;
        old_money.innerHTML = details.price.toFixed(2) + '元';
        money.innerHTML = (parseInt(old_price.innerHTML) * 0.9).toFixed(2) + '元';
        total.innerHTML = (parseFloat(money.innerHTML) + 249 + 55 + 159).toFixed(2) + "元";
      } else {
        console.log("加载失败");
      }
    }

    function add() {
      alert("该功能还未实现,就看看吧!")
      location.href = `mi_cart.html`;
    }
  </script>
  <script>
    /* 导航栏固定 */
    //获取导航栏元素
    var nav = document.querySelector(".nav-bar");
    //获取导航栏元素离页面顶部高度
    var nav_offSetTop = nav.offsetTop;
    //滚轮滚动事件
    window.onscroll = function () {
      //滚动条滚动高度
      var scroollTop = window.scrollY;
      //如果滚动条滚动高度>=导航栏高度
      if (scroollTop >= nav_offSetTop) {
        //导航栏堆叠到最高层
        nav.style.zIndex = "999";
        //导航栏固定
        nav.style.position = "fixed";
        //导航栏固定位置在顶部
        nav.style.top = "0";
      } else if (scroollTop < nav_offSetTop) {
        //当滚动条滚动高度<导航栏高度时，返回原来位置
        nav.style.position = "static";
      }
      /* 右侧导航栏回到顶部 */
      if (scroollTop > 1000) {
        toTop.style.visibility = "visible";
      } else {
        toTop.style.visibility = "hidden";
      }
    }
  </script>
</body>

</html>